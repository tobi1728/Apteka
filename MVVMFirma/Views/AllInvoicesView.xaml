<local:AllViewBase x:Class="MVVMFirma.Views.AllInvoicesView"
                   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                   xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                   xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                   xmlns:local="clr-namespace:MVVMFirma.Views"
                   mc:Ignorable="d" 
                   d:DesignHeight="500" 
                   d:DesignWidth="800">

    <Grid Background="#fff">
        <Grid.RowDefinitions>
            <!-- Wiersz 0: (opcjonalnie sort/wyszukiwanie, póki co pusty) -->
            <RowDefinition Height="Auto"/>

            <!-- Wiersz 1: filtry + przyciski (Filtruj, Drukuj, Export CSV) -->
            <RowDefinition Height="Auto"/>

            <!-- Wiersz 2: DataGrid z fakturami -->
            <RowDefinition Height="*"/>

            <!-- Wiersz 3: Podsumowanie (liczba, suma) -->
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Wiersz 1: FILTRY (DataOd/DataDo, KwotaOd/KwotaDo) + Filtruj, Drukuj, Export CSV -->
        <StackPanel Grid.Row="1"
                    Orientation="Horizontal"
                    Margin="10">

            <TextBlock Text="Data od:"
                       Margin="0,0,5,0"
                       VerticalAlignment="Center"/>
            <DatePicker SelectedDate="{Binding DataOd, Mode=TwoWay}"
                        Width="120"/>

            <TextBlock Text="Data do:"
                       Margin="15,0,5,0"
                       VerticalAlignment="Center"/>
            <DatePicker SelectedDate="{Binding DataDo, Mode=TwoWay}"
                        Width="120"/>

            <TextBlock Text="Kwota od:"
                       Margin="15,0,5,0"
                       VerticalAlignment="Center"/>
            <TextBox Text="{Binding KwotaOd, Mode=TwoWay}"
                     Width="70"/>

            <TextBlock Text="Kwota do:"
                       Margin="15,0,5,0"
                       VerticalAlignment="Center"/>
            <TextBox Text="{Binding KwotaDo, Mode=TwoWay}"
                     Width="70"/>

            <!-- Przycisk Filtruj -->
            <Button Content="Filtruj"
                    Command="{Binding FilterCommand}"
                    Width="80"
                    Margin="20,0,0,0"/>

            <!-- Przycisk Drukuj -->
            <Button Content="Drukuj"
                    Command="{Binding PrintCommand}"
                    Margin="10,0,0,0"
                    Width="80"/>

            <!-- Nowy przycisk: Export to CSV -->
            <Button Content="Export CSV"
                    Command="{Binding ExportCsvCommand}"
                    Margin="10,0,0,0"
                    Width="90"/>
        </StackPanel>

        <!-- Wiersz 2: Tabela z fakturami -->
        <DataGrid Grid.Row="2"
                  AutoGenerateColumns="False"
                  ItemsSource="{Binding List}"
                  SelectedItem="{Binding SelectedInvoice, Mode=TwoWay}"
                  CanUserAddRows="False"
                  IsReadOnly="True"
                  Margin="10">

            <DataGrid.Columns>
                <DataGridTextColumn Header="ID Faktury"
                                    Binding="{Binding ID_Faktury}" />
                <DataGridTextColumn Header="Numer Faktury"
                                    Binding="{Binding Numer_Faktury}" />
                <DataGridTextColumn Header="Dostawca"
                                    Binding="{Binding Nazwa_Dostawcy}" />
                <DataGridTextColumn Header="Data Wystawienia"
                                    Binding="{Binding Data_Wystawienia, StringFormat=d}" />
                <DataGridTextColumn Header="Kwota"
                                    Binding="{Binding Kwota}" />
                <DataGridTextColumn Header="Numer Zamówienia"
                                    Binding="{Binding Numer_Zamówienia}" />
            </DataGrid.Columns>
        </DataGrid>

        <!-- Wiersz 3: Podsumowanie (liczba, suma) -->
        <StackPanel Grid.Row="3"
                    Orientation="Horizontal"
                    Margin="10">
            <TextBlock Text="Liczba faktur:"
                       FontWeight="Bold"
                       VerticalAlignment="Center"/>
            <TextBlock Text="{Binding CountOfInvoices}"
                       Margin="5,0,15,0"
                       VerticalAlignment="Center"/>

            <TextBlock Text="Łączna kwota:"
                       FontWeight="Bold"
                       VerticalAlignment="Center"/>
            <TextBlock Text="{Binding SumOfInvoices}"
                       Margin="5,0,0,0"
                       VerticalAlignment="Center"/>
        </StackPanel>
    </Grid>
</local:AllViewBase>
